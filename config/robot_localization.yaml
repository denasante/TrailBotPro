# ### ekf config file ###
# robot_localization:
#     ros__parameters:
#         frequency: 30.0
#         two_d_mode: true
#         publish_acceleration: false
#         publish_tf: true
#         map_frame: map
#         odom_frame: odom
#         base_link_frame: base_link
#         world_frame: odom

#         odom0: odometry
#         odom0_config: [false, false, false,
#                       false, false, false,
#                       true, true, false,
#                       false, false, true,
#                       false, false, false]

#         imu0: imu
#         imu0_config: [false, false, false,
#                       false, false, false,
#                       false, false, false,
#                       false, false, true,
#                       false, false, false]


# # ### ekf config file ###
# # robot_localization:
# #   ros__parameters:
# #     use_sim_time: true        # keep sim time consistent
# #     frequency: 30.0
# #     two_d_mode: true
# #     publish_acceleration: false
# #     publish_tf: true

# #     # Frames
# #     map_frame: map
# #     odom_frame: odom
# #     base_link_frame: base_link
# #     world_frame: odom

# #     # Odometry from Gazebo bridge
# #     odom0: /odometry
# #     odom0_config: [true,  true,  false,   # x y z
# #                    false, false, true,    # roll pitch yaw
# #                    true,  true,  false,   # vx vy vz
# #                    false, false, true,    # vroll vpitch vyaw
# #                    false, false, false]   # ax ay az
# #     odom0_differential: false
# #     odom0_relative:     false

# #     # IMU (optional, yaw + yaw rate only)
# #     imu0: /imu
# #     imu0_config:  [false, false, false,
# #                    false, false, true,    # yaw
# #                    false, false, false,
# #                    false, false, true,    # yaw rate
# #                    false, false, false]
# #     imu0_differential: false
# #     imu0_relative:     false

# #     sensor_timeout: 0.2


# robot_localization:
#   ros__parameters:
#     frequency: 30.0
#     two_d_mode: true
#     publish_acceleration: false
#     publish_tf: true
#     map_frame: map
#     odom_frame: odom
#     base_link_frame: base_link
#     world_frame: odom

#     # Use the DRONE odometry from the bridge
#     odom0: /parrot/odometry
#     odom0_config: [false, false, false,
#                    false, false, false,
#                    true, true, false,
#                    false, false, true,
#                    false, false, false]

#     # (Temporarily disable IMU until we bridge it)
#     # imu0: /parrot/imu
#     # imu0_config: [false, false, false,
#     #               false, false, false,
#     #               false, false, false,
#     #               false, false, true,
#     #               false, false, false]


# One file, two EKF instances. Each block is keyed by the ekf_node's *name*.

ekf_husky:
  ros__parameters:
    use_sim_time: true
    frequency: 30.0
    two_d_mode: true
    publish_acceleration: false
    publish_tf: true

    map_frame:        map
    odom_frame:       odom
    base_link_frame:  base_link
    world_frame:      odom

    odom0: /odometry
    odom0_config: [false, false, false,
                   false, false, false,
                   true,  true,  false,
                   false, false, true,
                   false, false, false]

    imu0: /imu
    imu0_config: [false, false, false,
                  false, false, false,
                  false, false, false,
                  false, false, true,
                  false, false, false]

ekf_parrot:
  ros__parameters:
    use_sim_time: true
    frequency: 30.0
    two_d_mode: true
    publish_acceleration: false
    publish_tf: true

    map_frame:        map
    odom_frame:       odom
    base_link_frame:  base_link
    world_frame:      odom

    # Parrot inputs (namespaced bridge topics)
    odom0: /parrot/odometry
    odom0_config: [false, false, false,
                   false, false, false,
                   true,  true,  false,
                   false, false, true,
                   false, false, false]

    # Optional IMU when you bridge it
    imu0: /parrot/imu
    imu0_config: [false, false, false,
                  false, false, false,
                  false, false, false,
                  false, false, true,
                  false, false, false]